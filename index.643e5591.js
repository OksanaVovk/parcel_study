function e(e){const t=e[0].results,a=e[1].genres;return t.map((({original_title:e,poster_path:t,original_name:n,genre_ids:s,release_date:i,id:o})=>`<div class="film-card">\n        <img src="https://image.tmdb.org/t/p/w500${t}"  alt="" loading="lazy" data-id=${o} />\n        <div class="info">\n          <p class="film-name">${e||n}\n          </p>\n          <p class="info-item">\n            <b>${a.reduce(((e,t)=>(s.includes(t.id)&&e.push(` ${t.name}`),e)),[]).slice(0,2).concat([" Other"])} </b >\n            <b>|</b>\n            <b>${i?i.slice(0,4):"-"}</b>\n          </p>\n        </div>\n      </div>`)).join("")}function t(e){const{vote_average:t,vote_count:a,genres:n,original_title:s,poster_path:i,original_name:o,popularity:r,overview:l,id:c}=e;return console.log(n),`<div class="about_film-card">\n         <img src="https://image.tmdb.org/t/p/w500${i}" class="about_film-img" alt="" loading="lazy" data-id=${c} />\n        <div class="about_film-info">\n          <h1 class="about_film-name">${s||o}\n          </h1>\n          <div class="about_film-item">\n          <p class="about_film-text">Vote / Votes</p>\n          <b class="about_film-date">${t} / ${a}</b>\n          </div>\n          <div class="about_film-item">\n          <p class="about_film-text">Popularity</p>\n          <b class="about_film-date">${r}</b>\n          </div>\n          <div class="about_film-item">\n          <p class="about_film-text">Original Title</p>\n          <b class="about_film-date">${s||o}</b>\n          </div>\n          <div class="about_film-item">\n          <p class="about_film-text">Genre</p>\n          <b class="about_film-date">${n?n.map((e=>e.name)):" "}</b>\n          </div>\n          <h2 class="about_film-pretitle">ABOUT</h2>\n          <p class="about_film-overview">${l}</p>\n        </div>\n      </div>`}async function a(e){const t=`https://api.themoviedb.org/3/movie/${e}?api_key=024bf82d4805f650033dc69997860333`;console.log(t);const a=await fetch(t);return await a.json()}const n=new class{async searchFilm(){const e="024bf82d4805f650033dc69997860333",t=[`https://api.themoviedb.org/3/search/movie?api_key=${e}&language=en-US&page=1&include_adult=false&query=${this.searchQuery}&page=${this.page}`,`https://api.themoviedb.org/3/genre/movie/list?api_key=${e}&language=en-US`].map((async e=>(await fetch(`${e}`)).json()));return await Promise.all(t)}get query(){return this.searchQuery}set query(e){this.searchQuery=e}resetPage(){this.page=1}incrementPage(){this.page+=1}constructor(){this.searchQuery="",this.page=1}},s=new class{async fetchFilmsCards(){const e="024bf82d4805f650033dc69997860333",t=[`https://api.themoviedb.org/3/trending/movie/day?api_key=${e}&page=1`,`https://api.themoviedb.org/3/genre/movie/list?api_key=${e}&language=en-US`].map((async e=>(await fetch(`${e}`)).json()));return await Promise.all(t)}resetPage(){this.page=1}incrementPage(){this.page+=1}constructor(){this.page=1}},i=document.querySelector(".button_all"),o=document.querySelector(".films_all"),r=document.querySelector(".backdrop"),l=document.querySelector(".modal_film-info"),c=document.querySelector(".modal__button--close"),d=document.querySelector(".search-form");function u(){o.innerHTML=""}i.addEventListener("click",(async function(){u(),s.resetPage();try{const t=await s.fetchFilmsCards();console.log(t);const a=e(t);o.insertAdjacentHTML("afterbegin",a)}catch(e){console.log(e.message)}})),o.addEventListener("click",(function(e){if(l.innerHTML="",console.log(e.target),console.log(e.currentTarget),!e.target.dataset.id)return;console.log(e.target.dataset.id),a(e.target.dataset.id).then((e=>{if(console.log(e),!e)return alert("The resource you requested could not be found.");{m.setAttribute("data-id",`${e.id}`),h.setAttribute("data-id",`${e.id}`);const a=t(e);r.classList.remove("is-hidden"),document.body.classList.toggle("modal-open"),l.insertAdjacentHTML("beforeend",a)}})).catch((e=>console.log(e)))})),c.addEventListener("click",(function(){r.classList.add("is-hidden"),document.body.classList.toggle("modal-open")})),d.addEventListener("submit",(function(t){if(t.preventDefault(),u(),n.query=t.currentTarget.elements.searchQuery.value.trim(),console.log(n.searchQuery),""===n.query)return alert("Please enter search data.");n.resetPage(),n.searchFilm().then((t=>{console.log(t);const a=t[0].results,n=t[1].genres;if(console.log(a),console.log(n),0===a.length)return alert("Sorry, there are no images matching your search query. Please try again.");{const a=e(t);o.insertAdjacentHTML("afterbegin",a)}})).catch((e=>console.log(e)))}));const g=[],m=document.querySelector(".modal__button--watched"),h=document.querySelector(".modal__button--queue");m.addEventListener("click",(function(e){if(console.dir(e.target.dataset.id),localStorage.getItem("add-to-watchet-id")){const t=JSON.parse(localStorage.getItem("add-to-watchet-id"));t.push(e.target.dataset.id),localStorage.setItem("add-to-watchet-id",JSON.stringify(t))}else g.push(e.target.dataset.id),localStorage.setItem("add-to-watchet-id",JSON.stringify(g))}));
//# sourceMappingURL=index.643e5591.js.map
