{"mappings":"AA0EA,MAAMA,EAAMC,SAASC,cAAc,eAC7BC,EAAiBF,SAASC,cAAc,cAC9CF,EAAII,iBACF,SAQAC,UACE,IACE,MAAMC,QAtFZD,iBACE,MAMME,EAFU,CAHd,yFAEA,yGAG8BC,KAAIH,MAAMI,UACjBC,MAAM,GAAGD,MAChBE,SAIlB,aADoBC,QAAQC,IAAIN,GA0ERO,GACpBC,QAAQC,IAAIV,GACZ,MAAMW,EAuBZ,SAAqBX,GACnB,MAAMY,EAAYZ,EAAM,GAAGa,QACrBC,EAAad,EAAM,GAAGe,OAI5B,OAHAN,QAAQC,IAAIE,GACZH,QAAQC,IAAII,GAELF,EACJV,KACC,EAACc,eACCA,EAAcC,YACdA,EAAWC,cACXA,EAAaC,UACbA,EAASC,aACTA,EAAYC,eACZA,EAAcC,GACdA,KAGO,6EACoCL,qCAA+CK,oEAGtFN,GAAkCE,sEAI7BJ,EAAWS,QAAO,CAACC,EAAWC,KAC7BN,EAAUO,SAASD,EAAMH,KAC3BE,EAAUG,KAAK,IAAIF,EAAMG,QAEpBJ,IACN,iDAGDJ,EACIA,EAAaS,MAAM,EAAG,GACtBR,EAAeQ,MAAM,EAAG,yDAOrCC,KAAK,IAlEWC,CAAY/B,GAC3BH,EAAemC,mBAAmB,aAAcrB,GAChD,MAAOsB,GACPxB,QAAQC,IAAIuB,EAAMC,aAKxBrC,EAAeC,iBAAiB,SAEhC,SAAqBqC,GAGnB,GAFA1B,QAAQC,IAAIyB,EAAMC,QAClB3B,QAAQC,IAAIyB,EAAME,gBACbF,EAAMC,OAAOE,QAAQhB,GACxB,OAEAb,QAAQC,IAAIyB,EAAMC,OAAOE,QAAQhB,IAxFrCvB,eAA8BwC,GAC5B,MAAMC,EAAM,sCAAsCD,4DAClD9B,QAAQC,IAAI8B,GACZ,MAAMC,QAAiBrC,MAAMoC,GAE7B,aADoBC,EAASpC,OAqF3BqC,CAAeP,EAAMC,OAAOE,QAAQhB,IACjCqB,MAAKC,GAASnC,QAAQC,IAAIkC,KAC1BC,OAAMZ,GAASxB,QAAQC,IAAIuB","sources":["src/index.js"],"sourcesContent":["const KEY_API = '024bf82d4805f650033dc69997860333';\nasync function fetchFilmsCards() {\n  const festFetch =\n    'https://api.themoviedb.org/3/trending/all/day?api_key=024bf82d4805f650033dc69997860333';\n  const secondFetch =\n    'https://api.themoviedb.org/3/genre/movie/list?api_key=024bf82d4805f650033dc69997860333&language=en-US';\n  const userIds = [festFetch, secondFetch];\n\n  const arrayOfPromises = userIds.map(async userId => {\n    const response = await fetch(`${userId}`);\n    return response.json();\n  });\n\n  const users = await Promise.all(arrayOfPromises);\n  return users;\n}\n\nasync function fetchFilmModal(movie_id) {\n  const url = `https://api.themoviedb.org/3/movie/${movie_id}?api_key=024bf82d4805f650033dc69997860333&language=en-US`;\n  console.log(url);\n  const response = await fetch(url);\n  const movie = await response.json();\n  return movie;\n}\n\n// async function fetchgenre() {\n//   const response = await fetch(\n//     'https://api.themoviedb.org/3/genre/movie/list?api_key=024bf82d4805f650033dc69997860333&language=en-US'\n//   );\n//   const genresJson = await response.json();\n//   return genresJson;\n// }\n\n// let geners;\n\n// const doStuff = async () => {\n//   try {\n//     geners = await fetchgenre();\n//     console.log(geners);\n//   } catch (error) {\n//     console.log(error.message);\n//   }\n// };\n\n// doStuff();\n\nfunction fetchAllFilms() {\n  return fetch(\n    'https://api.themoviedb.org/3/trending/all/day?api_key=024bf82d4805f650033dc69997860333'\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n\n// function genreFilms() {\n//   return fetch(\n//     'https://api.themoviedb.org/3/genre/movie/list?api_key=024bf82d4805f650033dc69997860333&language=en-US'\n//   ).then(response => {\n//     if (!response.ok) {\n//       throw new Error(response.status);\n//     }\n//     return response.json();\n//   });\n// }\n\n// genreFilms()\n//   .then(genres => {\n//     console.log(genres);\n//   })\n//   .catch(error => console.log(error));\n\nconst btn = document.querySelector('.button_all');\nconst filmsContainer = document.querySelector('.films_all');\nbtn.addEventListener(\n  'click',\n  // () => {\n  //   fetchAllFilms()\n  //     .then(films => {\n  //       const markup = randerFilms(films);\n  //       filmsContainer.insertAdjacentHTML('beforebegin', markup);\n  //     })\n  //     .catch(error => console.log(error));\n  async () => {\n    try {\n      const users = await fetchFilmsCards();\n      console.log(users);\n      const markup = randerFilms(users);\n      filmsContainer.insertAdjacentHTML('afterbegin', markup);\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n);\n\nfilmsContainer.addEventListener('click', onFilmClick);\n\nfunction onFilmClick(event) {\n  console.log(event.target);\n  console.log(event.currentTarget);\n  if (!event.target.dataset.id) {\n    return;\n  } else {\n    console.log(event.target.dataset.id);\n    fetchFilmModal(event.target.dataset.id)\n      .then(movie => console.log(movie))\n      .catch(error => console.log(error));\n  }\n}\n\nfunction randerFilms(users) {\n  const filmArray = users[0].results;\n  const genreArray = users[1].genres;\n  console.log(filmArray);\n  console.log(genreArray);\n\n  return filmArray\n    .map(\n      ({\n        original_title,\n        poster_path,\n        original_name,\n        genre_ids,\n        release_date,\n        first_air_date,\n        id,\n      }) => {\n        // console.log(`${original_title}`);\n        return `<div class=\"film-card\">\n        <img src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"\" loading=\"lazy\"  data-id=${id} />\n        <div class=\"info\">\n          <p class=\"film-name\">${\n            original_title ? original_title : original_name\n          }\n          </p>\n          <p class=\"info-item\">\n            <b>${genreArray.reduce((listGenre, genre) => {\n              if (genre_ids.includes(genre.id)) {\n                listGenre.push(` ${genre.name}`);\n              }\n              return listGenre;\n            }, [])}</b>\n            <b>|</b>\n            <b>${\n              release_date\n                ? release_date.slice(0, 4)\n                : first_air_date.slice(0, 4)\n            }</b>\n          </p>\n        </div>\n      </div>`;\n      }\n    )\n    .join('');\n}\n"],"names":["$1f0dc3b9307be026$var$btn","document","querySelector","$1f0dc3b9307be026$var$filmsContainer","addEventListener","async","users","arrayOfPromises","map","userId","fetch","json","Promise","all","$1f0dc3b9307be026$var$fetchFilmsCards","console","log","markup","filmArray","results","genreArray","genres","original_title","poster_path","original_name","genre_ids","release_date","first_air_date","id","reduce","listGenre","genre","includes","push","name","slice","join","$1f0dc3b9307be026$var$randerFilms","insertAdjacentHTML","error","message","event","target","currentTarget","dataset","movie_id","url","response","$1f0dc3b9307be026$var$fetchFilmModal","then","movie","catch"],"version":3,"file":"index.9eb7f80d.js.map"}