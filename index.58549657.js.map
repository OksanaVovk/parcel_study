{"mappings":"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","sources":["src/index.js","src/NewApiSearchFilm.js","src/NewApiPopularFilms.js"],"sourcesContent":["import NewApiSearchFilm from './NewApiSearchFilm';\nimport NewApiPopularFilms from './NewApiPopularFilms';\nconst KEY_API = '024bf82d4805f650033dc69997860333';\n\nasync function fetchFilmModal(movie_id) {\n  const url = `https://api.themoviedb.org/3/movie/${movie_id}?api_key=${KEY_API}`;\n  console.log(url);\n  const response = await fetch(url);\n  const movie = await response.json();\n  return movie;\n}\n\nconst newApiSearchFilm = new NewApiSearchFilm();\nconst newApiPopularFilms = new NewApiPopularFilms();\n\nconst btn = document.querySelector('.button_all');\nconst filmsContainer = document.querySelector('.films_all');\nconst backdropEl = document.querySelector('.backdrop');\nconst modalFilmInfoEl = document.querySelector('.modal_film-info');\nconst btnModal = document.querySelector('.modal__button--close');\nconst formEl = document.querySelector('.search-form');\n\nbtn.addEventListener('click', startPopularFilms);\n\nasync function startPopularFilms() {\n  clearFilmsContainer();\n  newApiPopularFilms.resetPage();\n  try {\n    const dates = await newApiPopularFilms.fetchFilmsCards();\n    console.log(dates);\n    const markup = createFilmsList(dates);\n    filmsContainer.insertAdjacentHTML('afterbegin', markup);\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nfunction createFilmsList(dates) {\n  const filmArray = dates[0].results;\n  const genreArray = dates[1].genres;\n  console.log(filmArray);\n  console.log(genreArray);\n\n  return filmArray\n    .map(\n      ({\n        original_title,\n        poster_path,\n        original_name,\n        genre_ids,\n        release_date,\n        id,\n      }) => {\n        // console.log(`${original_title}`);\n        return `<div class=\"film-card\">\n        <img src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"\" loading=\"lazy\"  data-id=${id} />\n        <div class=\"info\">\n          <p class=\"film-name\">${\n            original_title ? original_title : original_name\n          }\n          </p>\n          <p class=\"info-item\">\n            <b>${genreArray.reduce((listGenre, genre) => {\n              if (genre_ids.includes(genre.id)) {\n                listGenre.push(` ${genre.name}`);\n              }\n              return listGenre;\n            }, [])}</b>\n            <b>|</b>\n            <b>${release_date ? release_date.slice(0, 4) : ''}</b>\n          </p>\n        </div>\n      </div>`;\n      }\n    )\n    .join('');\n}\n\nfilmsContainer.addEventListener('click', onFilmClick);\nbtnModal.addEventListener('click', onBtnModalClick);\n\nfunction onFilmClick(event) {\n  modalFilmInfoEl.innerHTML = '';\n  console.log(event.target);\n  console.log(event.currentTarget);\n  if (!event.target.dataset.id) {\n    return;\n  } else {\n    console.log(event.target.dataset.id);\n    fetchFilmModal(event.target.dataset.id)\n      .then(movie => {\n        console.log(movie);\n        if (!movie) {\n          return alert('The resource you requested could not be found.');\n        } else {\n          const markup = createFilmCard(movie);\n          backdropEl.classList.remove('is-hidden');\n          modalFilmInfoEl.insertAdjacentHTML('beforeend', markup);\n        }\n      })\n      .catch(error => console.log(error));\n  }\n}\n\nfunction createFilmCard(movie) {\n  const {\n    vote_average,\n    vote_count,\n    genres,\n    original_title,\n    poster_path,\n    original_name,\n    popularity,\n    overview,\n    id,\n  } = movie;\n  console.log(genres);\n\n  return `<div class=\"about_film-card\">\n        <img src=\"https://image.tmdb.org/t/p/w500${poster_path}\" class=\"about_film-img\" alt=\"\" loading=\"lazy\" data-id=${id}  />\n        <div class=\"about_film-info\">\n          <h1 class=\"about_film-name\">${\n            original_title ? original_title : original_name\n          }\n          </h1>\n          <div class=\"about_film-item\">\n          <p class=\"about_film-text\">Vote / Votes</p>\n          <b class=\"about_film-date\">${vote_average} / ${vote_count}</b>\n          </div>\n          <div class=\"about_film-item\">\n          <p class=\"about_film-text\">Popularity</p>\n          <b class=\"about_film-date\">${popularity}</b>\n          </div>\n          <div class=\"about_film-item\">\n          <p class=\"about_film-text\">Original Title</p>\n          <b class=\"about_film-date\">${\n            original_title ? original_title : original_name\n          }</b>\n          </div>\n          <div class=\"about_film-item\">\n          <p class=\"about_film-text\">Genre</p>\n          <b class=\"about_film-date\">${\n            genres ? genres.map(genre => genre.name) : ' '\n          }</b>\n          </div>\n          <h2 class=\"about_film-pretitle\">ABOUT</h2>\n          <p class=\"about_film-overview\">${overview}</p>\n        </div>\n      </div>`;\n}\n\nfunction onBtnModalClick() {\n  backdropEl.classList.add('is-hidden');\n}\n\nfunction clearFilmsContainer() {\n  filmsContainer.innerHTML = '';\n}\n\nformEl.addEventListener('submit', onSearchFilm);\n\nfunction onSearchFilm(event) {\n  event.preventDefault();\n  clearFilmsContainer();\n\n  newApiSearchFilm.query =\n    event.currentTarget.elements.searchQuery.value.trim();\n  console.log(newApiSearchFilm.searchQuery);\n  if (newApiSearchFilm.query === '') {\n    return alert('Please enter search data.');\n  }\n  newApiSearchFilm.resetPage();\n\n  newApiSearchFilm\n    .searchFilm()\n    .then(dates => {\n      console.log(dates);\n      const filmArray = dates[0].results;\n      const genreArray = dates[1].genres;\n      console.log(filmArray);\n      console.log(genreArray);\n\n      if (filmArray.length === 0) {\n        return alert(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n      } else {\n        const markup = createFilmsList(dates);\n        filmsContainer.insertAdjacentHTML('afterbegin', markup);\n      }\n    })\n    .catch(error => console.log(error));\n}\n","export default class NewApiSearchFilm {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  async searchFilm() {\n    const KEY_API = '024bf82d4805f650033dc69997860333';\n    const festFetch = `https://api.themoviedb.org/3/search/movie?api_key=${KEY_API}&language=en-US&page=1&include_adult=false&query=${this.searchQuery}&page=${this.page}`;\n    const secondFetch = `https://api.themoviedb.org/3/genre/movie/list?api_key=${KEY_API}&language=en-US`;\n    const dateIds = [festFetch, secondFetch];\n\n    const arrayOfPromises = dateIds.map(async userId => {\n      const response = await fetch(`${userId}`);\n      return response.json();\n    });\n\n    const dates = await Promise.all(arrayOfPromises);\n    return dates;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n}\n","export default class NewApiPopularFilms {\n  constructor() {\n    this.page = 1;\n  }\n\n  async fetchFilmsCards() {\n    const KEY_API = '024bf82d4805f650033dc69997860333';\n    const festFetch = `https://api.themoviedb.org/3/trending/movie/day?api_key=${KEY_API}&page=1`;\n    const secondFetch = `https://api.themoviedb.org/3/genre/movie/list?api_key=${KEY_API}&language=en-US`;\n    const dateIds = [festFetch, secondFetch];\n\n    const arrayOfPromises = dateIds.map(async userId => {\n      const response = await fetch(`${userId}`);\n      return response.json();\n    });\n\n    const dates = await Promise.all(arrayOfPromises);\n    return dates;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n}\n"],"names":["$1f0dc3b9307be026$var$newApiSearchFilm","async","KEY_API","arrayOfPromises","this","searchQuery","page","map","userId","fetch","json","Promise","all","query","newQuery","resetPage","incrementPage","constructor","$1f0dc3b9307be026$var$newApiPopularFilms","$1f0dc3b9307be026$var$btn","document","querySelector","$1f0dc3b9307be026$var$filmsContainer","$1f0dc3b9307be026$var$backdropEl","$1f0dc3b9307be026$var$modalFilmInfoEl","$1f0dc3b9307be026$var$btnModal","$1f0dc3b9307be026$var$formEl","$1f0dc3b9307be026$var$createFilmsList","dates","filmArray","results","genreArray","genres","console","log","original_title","poster_path","original_name","genre_ids","release_date","id","reduce","listGenre","genre","includes","push","name","slice","join","$1f0dc3b9307be026$var$clearFilmsContainer","innerHTML","addEventListener","fetchFilmsCards","markup","insertAdjacentHTML","error","message","event","target","currentTarget","dataset","movie_id","url","response","$1f0dc3b9307be026$var$fetchFilmModal","then","movie","alert","vote_average","vote_count","popularity","overview","$1f0dc3b9307be026$var$createFilmCard","classList","remove","catch","add","preventDefault","elements","value","trim","searchFilm","length"],"version":3,"file":"index.58549657.js.map"}